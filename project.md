```markdown
# Dream of One — 게임 정의 및 기획서 (로그 기반 사회조직 시뮬레이션, 개정판)
이벤트 중심, 로그 누적 기반 세계 이해, 거리 기반 로그 주입, 결정적 코어 + LLM 표면화

---

## 0. 문서 목적과 범위

### 0.1 목적
본 문서는 **Dream of One**을 “현실 사회를 모방하는 조직 기반 시뮬레이션 게임”으로 정의하고, 게임이 무엇이며 플레이어가 무엇을 하게 되는지, 세계가 어떤 방식으로 굴러가는지를 **로그 중심(world-understanding-by-logs)** 관점에서 상세히 규정한다.

### 0.2 핵심 전제(이번 개정의 중심)
- 본 프로젝트는 **VLM / world model 수준의 ‘세계 이해 AI’를 만들려는 것이 아니다.**
- 대신, 세계에서 발생하는 사실 변화가 **텍스트 기반 로그(WEL)** 로 지속적으로 누적되고,
- NPC는 자신의 위치/거리/시야 조건에 따라 **주변에서 최근에 발생한 로그를 주입받아** 다음 행동을 결정한다.
- 따라서 “**로그가 잘 쌓이고, 잘 주입되고, 잘 해석되는 구조**”가 게임의 핵심이다.

### 0.3 비목표(명확히 제외)
- **스냅샷 저장/복원(세이브/로드)** 기능은 고려하지 않는다.
- 이벤트 로그(WEL)의 재생(replay)으로 상태를 복원하는 기능도 고려하지 않는다.
- LLM이 판정/상태 전이를 결정하는 구조는 금지한다(결정적 코어 유지).

---

## 1. 한 줄 정의

여러 조직이 공존하는 작은 사회(도시 블록)에서 플레이어는 **꿈 밖에서 온 티(outsiderness)를 내지 않고** 살아가야 한다.  
사회는 모든 사건을 **텍스트 로그로 기록**하고, NPC는 **주변 로그를 근거로** 가십을 전파하거나 신고하며, 경찰은 **축적된 기록과 증거(Artifact)** 로 절차적 판정을 내린다.

---

## 2. 게임 정체성(핵심 기둥)

1) **로그-우선 세계(Log-First World)**
- 세계의 “지금 상태”를 완벽히 모델링하지 않는다.
- 대신 “무슨 일이 있었는지”를 텍스트 로그로 남기고,
- NPC는 주변 로그를 읽어 “지금 어떤 분위기/맥락인지”를 추론한다.

2) **조직이 사회를 움직인다**
- NPC는 개인의 랜덤 행동이 아니라 **조직 목표**를 수행한다.
- 조직 목표의 충돌이 사건을 만들고, 사건은 로그로 누적된다.

3) **결정적 코어(Deterministic Core)**
- 위반/탐지/의심/신고/판정/지표 업데이트는 규칙 기반으로 결정한다.
- LLM은 1줄 대사/요약 등 **표면 텍스트**만 담당한다.

4) **텍스트-우선 결과**
- 플레이어에게 보이는 모든 결과는 **1–2줄 텍스트 + 성과물(Artifact)** 로 귀결된다.

---

## 3. 월드(사회) 구성

### 3.1 공간 스케일
- 70m × 70m 도시 블록(사회 단위)
- 장소는 “활동 노드”로 기능하며, 사건은 장소에 귀속되어 누적된다.

### 3.2 주요 장소(노드)
- **인디 스튜디오(2층)**: 개발/검수/승인/릴리즈 흐름
- **편의점**: 줄, 거래, 라벨(운영 규범) 마찰 지점
- **공원**: 좌석/소음/촬영/민원 등 생활 규범 무대
- **지구대 초소**: 신고/심문/증거/판정 절차 기관
- **CCTV 포인트(2개)**: “기록 → 증거” 전환 장치

### 3.3 사회조직(조직 단위 정의)
각 조직은 다음 항목으로 정의한다.
- **조직 목표(Goal)**
- **조직 절차(Procedure)**
- **조직 자원(Resource)**
- **조직이 생산하는 성과물(Artifacts)**

예시:

#### A) 스튜디오
- 목표: RC 제출(검수 → 승인 → 투입)
- 절차: 칸반 갱신 → 패치노트 작성 → PM 승인 → RC 삽입
- 자원: 칸반 보드, 라운지, 서버 슬롯
- 성과물: 칸반 로그, 패치노트, 승인 노트, 사건 로그 스트립

#### B) 지구대
- 목표: 경범 처리, 재발 방지, 증거 확보
- 절차: 신고 접수 → 현장 확인 → 증거 수집 → 심문 → 판정
- 자원: 티켓 발부, 프린터, 캡처 보드
- 성과물: 위반 티켓, CCTV 캡처, 사건 로그 스트립

#### C) 상인회/편의점 운영
- 목표: 품절 0, 라벨 갱신, 거래 질서 유지
- 절차: 라벨 점검 → 진열/재고 갱신 → 카운터 규칙 준수
- 자원: 라벨 시스템, 카운터
- 성과물: 가격/품절 라벨, 거래 메모

#### D) 공원관리
- 목표: 좌석/소음/촬영 규범 유지, 민원 최소화
- 절차: 현장 경고 → 조치 → 보고서 작성
- 자원: 게시판, 조치 권한
- 성과물: 조치 보고, 게시판 공지, 민원 메모

#### E) 카페/휴게 공간 운영
- 목표: 주문 질서/좌석 회전/소음 관리
- 절차: 주문 → 대기 → 좌석 안내 → 정리
- 자원: 주문대, 번호표, 좌석표
- 성과물: 주문 메모, 좌석/정리 로그

#### F) 배송/물류
- 목표: 정시 배송, 출입 규정 준수
- 절차: 픽업 → 출입 확인 → 수취 서명 → 반출
- 자원: 배송 카트, 출입 체크리스트
- 성과물: 배송 라벨, 수령 서명 로그

#### G) 시설관리(빌딩 관리)
- 목표: 시설 안전 유지, 장애 최소화
- 절차: 정기 점검 → 수리 요청 → 작업 승인 → 완료 보고
- 자원: 점검 체크리스트, 작업 허가서
- 성과물: 점검 로그, 수리 티켓

#### H) 미디어/촬영팀
- 목표: 촬영 허가 준수, 촬영 구역 안전 유지
- 절차: 사전 허가 → 촬영 구역 표시 → 촬영 → 반납
- 자원: 촬영 장비, 허가서
- 성과물: 촬영 허가서, 촬영 로그

### 3.4 아트/환경 에셋 적용 (CITY package 기준)
도시 블록 규모가 커졌으므로 플레이 가능성과 가독성을 유지하면서 **CITY package** 기반으로 월드를 시각적으로 완성한다.

- **목표**: 프리미티브/대체 오브젝트를 CITY 패키지 프리팹으로 치환해 “도시 블록”으로 설득력 있게 보이게 한다.
- **스케일 규칙**: 1 unit = 1m 고정, 프리팹 스케일 1.0 유지(스케일 조정은 배치로 해결).
- **랜드마크 구분**: 스튜디오/편의점/공원/지구대/CCTV는 건물 외형·간판·소품으로 명확히 식별.
- **동선 표현**: 도로/보도/횡단보도/가로등/벤치/가로수로 이동 경로와 Zone 경계를 시각화.
- **가시성 우선**: 주요 상호작용 오브젝트와 NPC가 가려지지 않도록 배치/높이 제한.
- **충돌/네비게이션**: 모든 건물/소품에 적절한 콜라이더와 NavMesh 장애물 적용.
- **퍼포먼스**: Static 플래그, LOD, 라이트 베이크/프로브 전제.

---

## 4. 플레이어: Cover(역할) 중심 생존

### 4.1 Cover의 의미
Cover는 “플레이어가 사회 내부자처럼 보이게 하는 일관된 정체성”이며,
단순 직업명이 아니라 **행동 기대치/언어/절차 이해 수준**을 포함한다.

### 4.2 Cover의 구성 요소
- 소속(조직 또는 외부 협력자)
- 역할(예: 인턴, 계약직, 납품 기사, 청소 용역)
- 기본 과업(일상 과업 1–2개)
- 금기(하면 이상해 보이는 행동/말)
- 기본 말투/용어(조직 용어집과 정합성)

### 4.3 Cover 유지의 실패 패턴(outsiderness 상승 원인)
- 절차를 건너뛰거나, 역할에 맞지 않는 권한 행동을 함
- 조직 용어를 어색하게 사용하거나, 같은 질문을 반복
- 사회 규범 위반 후 “사회적 수습”을 하지 않음
- 증거물/절차(티켓, 캡처, 신고)를 방해함

---

## 5. 로그 기반 세계 모델: WEL(World Event Log)

### 5.1 WEL의 정의
WEL은 세계에서 일어난 사실 변화의 **append-only 텍스트 로그**다.  
이 프로젝트에서 WEL은 “세계 이해”의 중심이며, NPC 행동 결정의 기본 입력이 된다.

- WEL은 복원/세이브를 위한 장치가 아니다.
- WEL은 “무슨 일이 있었는지”를 축적하고, “누가 무엇을 알고 있는지”를 형성한다.

### 5.2 WEL의 두 층(권장)
WEL은 “읽기 쉬움”과 “판정 가능함”을 동시에 만족해야 한다. 이를 위해 2층 구조를 권장한다.

1) **Structured Event(판정용 필드)**
- 최소 필드: `{t, actor, event, place, topic, rule?, object?, note?}`
- 판정/지표 업데이트는 이 구조화 필드에 의해 결정된다.

2) **Canonical Text(주입용 1줄 텍스트)**
- NPC와 플레이어가 읽는 1줄 로그
- 규칙 기반 템플릿으로 생성(결정적)
- 예: `[R4][Queue][Violation] 새치기 의심: 말로 순서 합의 없음.`

> 중요: NPC가 “텍스트 기반으로 주입받아 행동 결정”한다는 요구를 충족하면서도,
> 판정이 흔들리지 않도록 Canonical Text는 템플릿 기반으로 고정한다.

### 5.3 이벤트 분류(예시)
- 이동/존: `EnteredZone / ExitedZone`
- 질서/거래: `QueuedAtCounter / PaymentProcessed / LabelChanged`
- 규범/위반: `ViolationDetected(rule)`
- 가십: `RumorShared / RumorQuestioned / RumorConfirmed / RumorDebunked`
- 절차: `ReportFiled / InterrogationStarted / VerdictGiven`
- 증거: `CCTVCaptured / EvidenceTouched / TicketIssued`
- 조직 업무: `TaskStarted / TaskCompleted / ApprovalGranted / RCInserted`

---

## 6. 로그가 “사회”가 되는 과정: Semantic Shaper + Spatial Blackboard

### 6.1 Semantic Shaper(승격 규칙)
WEL의 저수준 사건 묶음을 “사회가 이해 가능한 1줄 사건”으로 승격한다.

- 승격은 결정 규칙으로 수행(판정 일관성)
- 출력은 1줄, 80자 내(권장)
- 예:
  - `QueuedAtCounter` + “합의 없음” 조건 → “새치기 의심: 말로 순서 합의 없음.”
  - `PhotoTriggered x N` → “촬영 위반 정황: 제한 구역에서 반복 촬영.”

### 6.2 Spatial Blackboard(거리 기반 주입의 핵심)
각 장소/오브젝트는 “최근 로그 요약 버퍼”를 가진다.

- 단위: `Zone` 또는 `Object` (카운터, 벤치, CCTV, 게시판 등)
- 구성:
  - 최근 N개 Canonical Text
  - 각 항목은 `{timestamp, topic, actor, severity, text}` 성격을 가진다.
- 목적:
  - NPC가 매번 전체 WEL을 읽지 않고,
  - **자기 주변의 ‘최근 분위기/사건’만** 빠르게 주입받도록 한다.

---

## 7. 거리 기반 로그 주입 규칙(게임의 핵심 규칙)

### 7.1 주입의 의미
“NPC가 세계를 이해한다”는 것은,
NPC가 자신의 위치/시야 조건에서 접근 가능한 Blackboard의 로그들을 **컨텍스트로 획득**한다는 뜻이다.

### 7.2 주입 범위(권장 정의)
NPC는 매 의사결정 틱마다 다음을 읽는다.

1) **근접 주입(Near)**
- 거리: 1.2m 이내
- 개수: 최근 2개

2) **시야 주입(FOV)**
- 거리: 8m 이내
- 개수: 최근 3개

3) **소음 주입(Noise)**
- 거리: 6m 이내
- 개수: 최근 1개(고심각도)

4) **개인 메모리 주입**
- NPC 개인이 최근에 본 중요한 로그 N개(예: 5개, TTL 8분)

### 7.3 주입 우선순위(권장)
- 절차/증거 > 규범/위반 > 가십 > 일반 로그

---

## 8. NPC 의사결정: 로그 기반 사회 에이전트

### 8.1 NPC 입력(매 틱)
NPC는 다음 컨텍스트를 입력으로 가진다.
- 조직 목표/개인 목표
- 역할/권한/절차
- 주입된 주변 로그(Blackboard)
- 개인 메모리(최근 사건)
- 증거물 근접 여부
- 플레이어에 대한 신념/의심 상태

### 8.2 NPC 내부 상태(핵심 수치)
- `o`: 대화/행동 1건에서 드러난 외부인스러움(0~1)
- `pᵢ`: 플레이어가 외부인일 확률(신념)
- `sᵢ`: 의심 점수(0~100)
- `G`: 전역 인지율(0~1)

### 8.3 NPC 출력(행동 선택)
NPC가 선택하는 출력은 “사회적 행위” 위주다.
- 질문(확인/추궁)
- 가십 전파(공유)
- 신고(절차 개시)
- 중재(수습)
- 업무 수행(조직 목표 진행)
- 증거 생성/보강(캡처 요청, 티켓 발부 유도 등)

> v0.1/초기 단계에서 NPC의 이동/회피 같은 복잡 행동은 최소화하되,
> “질문/공유/신고/절차” 같은 사회적 출력이 풍부해지도록 설계한다.

### 8.4 NPC 로스터(확장)
조직 확장을 반영해 NPC 역할을 늘린다(초기 배치 기준, 균형은 추후 조정).
- 스튜디오: PM, 개발자, QA, 릴리즈 담당
- 지구대: 순경, 조사관, 민원 담당
- 편의점/상인회: 점장, 알바, 재고 담당
- 공원관리: 관리인, 현장 경고 담당
- 카페/휴게: 바리스타, 안내 스태프
- 배송/물류: 배송기사, 출입 확인 담당
- 시설관리: 시설 기사, 안전 점검 담당
- 미디어/촬영: 리포터/촬영 스태프
- 시민군: 주민 대표, 관광객, 학생/직장인

---

## 9. 가십 네트워크(로그 기반으로 구현되는 사회적 확산)

### 9.1 가십의 정의
가십은 “사건의 해석”이며, 증거가 없을 때 사회가 사건을 처리하는 중간 상태다.

- 상태:
  - Draft(회색): 미확정, 질문/의심 단계
  - Final(컬러): 증거/절차로 확정 또는 반박

### 9.2 전파 규칙(개념)
- 근접 대화로만 전파(사회적 접촉)
- 신뢰도 `w ∈ [0,1]` 보유
- 출처, 시각, 장소 태그 유지
- 증거가 가까우면 `w`가 크게 변하며 Final로 전환될 수 있다.

### 9.3 확정/반박 트리거
- CCTV 캡처, 티켓, 승인 노트, 조치 보고 등 Artifact가 생성되거나,
- 경찰 심문/판정 절차가 실행되면,
가십은 Confirmed/Debunked로 전환된다.

---

## 10. 경찰 절차: 로그와 증거로 내리는 판정

### 10.1 경찰의 역할
경찰은 즉흥 처벌이 아니라 **사건 묶음(Case Bundle)** 을 구성해 절차적으로 판정한다.

### 10.2 사건 묶음(Case Bundle) 구성 요소
- 위반 사건 로그(언제/어디서/무엇을)
- 신고 로그(누가/왜)
- 증거물(캡처/티켓/메모/승인 관련 문서)
- 반박/해명 로그(있다면)
- 관련자 진술(1줄 대사/요약)

### 10.3 판정 결과(개념)
- 무혐의/보류/의심 강화/퇴출(또는 강한 페널티 상태)
- 판정은 “규칙 기반”으로 결정되며, 텍스트는 판정 결과를 1줄로 서술한다.

---

## 11. LLM 사용 범위(표면화만, 로그 중심 유지)

### 11.1 LLM의 허용 역할
- 1줄 대사 생성(질문, 중재, 심문, 판정 멘트)
- 로그 요약/톤 변주(항상 Canonical Text를 기반으로)

### 11.2 LLM의 금지 역할
- 구조화 로그의 사실 변경/판정 변경 금지
- 증거 생성 여부 판단 금지

---

## 12. 대표 사건 설계(조직이 알아서 돌아가는 사회)

### 12.1 편의점 질서 사건
- 줄 서기 규범 위반 발생
- 근처 NPC가 가십/신고
- 경찰이 사건 묶음을 구성해 판정

### 12.2 스튜디오 릴리즈 사건
- 칸반/패치/승인 절차 중 하나 누락
- 증거(승인 노트/RC 로그)가 등장
- 경찰 판정/사회적 반응

### 12.3 공원 소음 사건
- 소음 민원/경고 로그 누적
- 관리인의 조치 보고 등장
- 시민 가십/신고로 사건 확정

---

## 13. 플레이어 루프

플레이어는 “단일 사건 해결”이 아니라,
**사회에서 “외부인처럼 보이지 않기”** 가 핵심이다.

1) Cover 유지(조직 용어/절차를 자연스럽게 수행)  
2) 사건 관찰 → 로그 축적(자신도 로그의 일부)  
3) 사회의 절차가 돌아가는 동안 갈등을 유도하거나 회피  
4) 경찰/조직 판단에 의해 위기 혹은 안정 상태로 이동

---

## 14. 데모 시연 설계(사회조직 버전, 로그 중심)

데모는 “조직이 일을 한다”는 장면을 보여준다.

### 핵심 흐름
1) 이벤트 발생(규범 위반)  
2) 주변 NPC가 로그 주입 → 가십/신고  
3) 증거 등장(CCTV, 티켓, 승인 노트)  
4) 경찰 절차로 판정  
5) 플레이어는 Cover를 유지하며 조직들과 상호작용

### 막 1: 편의점 질서 사건(규범 위반 → 가십 → 신고 → 판정)
- “줄 서기” 위반 발생
- 근처 NPC가 “방금 본 사건”을 근거로 한 줄 발화/신고
- CCTV/티켓/사건 로그 스트립 중 최소 1개가 등장해 “증거” 역할을 한다.
- 경찰은 사건 묶음을 구성하고 판정을 출력한다.

### 막 2: 스튜디오 릴리즈 사건(조직 목표 → 증거 → 판정)
- 절차 누락/오해가 사건으로 변환된다.
- CCTV/승인 노트/사건 로그 스트립 중 최소 1개가 등장해 “증거” 역할을 한다.
- 경찰은 사건 묶음을 구성하고 판정을 출력한다.

필수로 보이기:
- 조직 목표 수행(“그냥 걷는 NPC”가 아니라 실제 업무 흐름)
- 증거(Artifact)가 루머를 확정/반박시키는 순간
- 경찰이 “로그+증거”로 판정하는 순간

---

## 15. 설계 품질 체크리스트(로그 중심 완결성)

본 게임이 “사회처럼 작동”하려면 아래 조건이 만족되어야 한다.

### 15.1 로그 품질
- 모든 핵심 사건은 1줄 Canonical Text로 남는다.
- Canonical Text는 템플릿 기반이며 모호하지 않다(누가/무엇을/어디서).
- 동일 사건이 과도하게 중복 기록되지 않는다(쿨다운/디바운스).

### 15.2 주입 품질
- NPC는 “자기 주변에서 최근에 일어난 일”을 실제로 읽는다.
- 거리/시야/소음 조건이 명확히 반영된다.
- Blackboard TTL로 사회적 망각이 발생한다.

### 15.3 사회적 절차의 일관성
- 위반/가십/신고/증거/판정의 인과가 로그에서 추적 가능하다.
- 판정은 규칙 기반이며, LLM의 표현이 판정을 바꾸지 않는다.

---

## 16. 요약(핵심 문장)

Dream of One은 “상태를 완벽히 모델링하는 AI”가 아니라,  
**텍스트 로그가 누적되는 사회**를 만들고, NPC가 **거리 기반으로 주변 로그를 주입받아**  
조직 목표/절차를 수행하며 가십/신고/판정이라는 사회적 프로세스를 돌리는 게임이다.
```
